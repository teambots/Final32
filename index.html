<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Transfusion Quiz</title>
    <style>
        :root { --primary: #2c3e50; --success: #27ae60; --danger: #e74c3c; --bg: #f8f9fa; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .quiz-card { background: white; width: 95%; max-width: 700px; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .progress-container { width: 100%; background: #eee; height: 8px; border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--primary); width: 0%; transition: width 0.4s ease; }
        .question-text { font-size: 22px; font-weight: 600; color: var(--primary); margin-bottom: 25px; line-height: 1.4; }
        .options-list { display: grid; gap: 12px; }
        .option { padding: 18px; border: 2px solid #edeff2; border-radius: 12px; cursor: pointer; transition: 0.2s; font-size: 16px; }
        .option:hover { border-color: var(--primary); background: #f0f4f8; }
        .option.correct { background: #d4edda !important; border-color: var(--success) !important; color: #155724; font-weight: bold; }
        .option.wrong { background: #f8d7da !important; border-color: var(--danger) !important; color: #721c24; }
        .nav-btn { display: none; margin-top: 30px; width: 100%; padding: 15px; border: none; border-radius: 12px; background: var(--primary); color: white; font-size: 18px; font-weight: bold; cursor: pointer; }
        .setup-screen, .result-screen { text-align: center; }
        .model-btn { padding: 20px 40px; margin: 10px; font-size: 20px; border-radius: 15px; border: none; background: var(--primary); color: white; cursor: pointer; }
    </style>
</head>
<body>

<div class="quiz-card">
    <div id="setup" class="setup-screen">
        <h2 style="color: var(--primary);">Select Quiz Model</h2>
        <button class="model-btn" onclick="startQuiz('A')">Model A (65 Questions)</button>
        <button class="model-btn" onclick="startQuiz('B')">Model B (65 Questions)</button>
    </div>

    <div id="quiz-area" style="display: none;">
        <div style="text-align: center; margin-bottom: 10px;"><span id="q-counter">Question 1/65</span></div>
        <div class="progress-container"><div id="p-bar" class="progress-bar"></div></div>
        <div id="q-text" class="question-text"></div>
        <div id="options" class="options-list"></div>
        <button id="next-btn" class="nav-btn" onclick="nextQuestion()">Next Question →</button>
    </div>

    <div id="result" class="result-screen" style="display: none;">
        <h2 style="color: var(--primary);">Completed!</h2>
        <div style="font-size: 48px; margin: 20px 0; color: var(--success);" id="final-score">0/65</div>
        <button class="model-btn" onclick="location.reload()">Restart Quiz</button>
    </div>
</div>

<script>
const questionsA = [
    {q: "All of the following about autologous blood transfusion are correct, except:", options: ["patients who may need blood for their own before surgical procedures", "Patients who may need blood for their own during surgical procedures", "Patients who may need blood for their own after surgical procedures", "Patients who may donate his own blood to another patient"], correct: 3},
    {q: "Major hemorrhage is an indication for ICS intraoperative cell salvage:", options: ["True", "False"], correct: 0},
    {q: "Monospecific AHG reagent:", options: ["contain either anti-IgG or anti-C3b antibody", "Is not useful in identifying the molecule causing a positive DAT", "contain human IgG or complement molecule", "None of the above"], correct: 0},
    {q: "(AHF) is related to:", options: ["RBCs", "plasma", "cryoprecipitate", "platelets"], correct: 2},
    {q: "The main role of plasma is:", options: ["Provides blood clotting", "Helps to maintain blood pressure", "Balances the levels of sodium and potassium", "All of the above are correct"], correct: 3},
    {q: "T-lymphocytes can cause a reaction and Graft-versus host disease when transfused:", options: ["True", "False"], correct: 0},
    {q: "The main advantage of autologous blood donation is:", options: ["Reduced cost of transfusion", "Elimination of risk of alloimmunization", "Increased availability of rare blood type", "Longer storage life"], correct: 1},
    {q: "A trauma patient requires immediate transfusion, no time is available for blood grouping and crossmatching. Which blood group should be transfused:", options: ["Group O Rh positive", "Group O Rh negative", "Group AB Rh positive", "Group AB Rh negative"], correct: 1},
    {q: "The main purpose of (IAT) is to detect invitro sensitization of RBCs by antibodies in serum:", options: ["True", "False"], correct: 0},
    {q: "A Rh-negative mother delivers a Rh positive baby. The newborn develops jaundice within 24 hours, DAT is positive. What is the type of antibodies are involved?", options: ["Anti-A antibodies", "Anti-B antibodies", "Anti-D antibodies", "None of the above"], correct: 2},
    {q: "Platelets involved all of the following; except:", options: ["Help the blood to clot", "Contains Heinz bodies", "Used in the treatment of some cancers", "Produce 5-Hydroxytryptamine"], correct: 1},
    {q: "The clinical use of (DAT) test in blood banking is to:", options: ["Detect HTR", "detect HDN", "Detect AIHA", "All are correct"], correct: 3},
    {q: "Cord blood sample must be washed (2-3) times only before used:", options: ["True", "False"], correct: 1},
    {q: "Polyspecific AHG reagent contain:", options: ["IgG only", "anti-complement", "Both a and b", "None a and b"], correct: 2},
    {q: "The antibodies in AHG sera act as bridges between RBCs:", options: ["True", "False"], correct: 0},
    {q: "Donor must be declined when he has a past history of suffering from:", options: ["Hypertension", "SLE", "D.M", "All are correct"], correct: 3},
    {q: ".......... is the process by which the required component of whole blood is separated and collected from the donor using an automated blood cell separation device:", options: ["Centrifugation", "Apheresis", "Chromatography", "Filteration"], correct: 1},
    {q: "All donated blood must be screened for:", options: ["Viral infections", "Bacterial infections", "Parasitic infections", "All"], correct: 3},
    {q: "Which one of the following statements is incorrect:", options: ["People with type A blood have B Abs", "People with type B blood have A Abs", "People with type O blood haven't Abs", "People with type AB blood haven't Abs"], correct: 2},
    {q: "Indications for cryoprecipitate transfusion are all of the following; except:", options: ["Acquired hypofibrinogenemia", "Congenital factor VIII deficiency", "Severe iron deficiency anemia", "Factor XIII deficiency"], correct: 2},
    {q: "(H) gene is present in O blood type only:", options: ["True", "False"], correct: 1},
    {q: "TRALI is caused by an antibodies in the donor blood reacting with which one of the following leukocytes?", options: ["Neutrophils", "Lymphocytes", "Monocytes", "Basophils"], correct: 0},
    {q: "The risk of HDN exists when the mother is ........ and the child is .........:", options: ["O; AB", "AB; O", "Rh.Pos; Rh.neg", "Rh.neg; Rh.Pos"], correct: 3},
    {q: "The reactivity of blood group type A is confirmed by detecting the presence of which immunodominant sugar molecule:", options: ["N-acetyl-D-galactosamine", "N-acetyl-D-glucosamine", "L-fucose", "D-galactose"], correct: 0},
    {q: "Acquired (B) blood grouping type occurs with:", options: ["(B) RBCs", "(A1) RBCs", "(AB) RBCs", "(O) RBCs"], correct: 1},
    {q: "Which blood group is the universal donor for RBCs?", options: ["(AB) pos", "(O) pos", "(O) neg", "(AB) neg"], correct: 2},
    {q: "ABO discrepancies means cell grouping and serum grouping test do not agree:", options: ["True", "False"], correct: 0},
    {q: "Serum or plasma is a specific specimen used for detection of Rh D,C,E:", options: ["True", "False"], correct: 1},
    {q: "All of the followings are permanent deferral; except:", options: ["IDDM", "cancers", "Epilepsy", "Pregnants"], correct: 3},
    {q: "Which blood component must be used in a patient with haemophilia B:", options: ["Platelets", "PRBCs", "FFP", "Cryoprecipitate"], correct: 2},
    {q: "Which one of the followings is incorrect about RBCs:", options: ["Volume 300 ml", "PCV 60%", "storage at 37c", "shelf life 35 days"], correct: 2},
    {q: "An old patient with heart failure develops dyspnea, hypotension, and pulmonary edema after blood transfusion; which one of the following is the diagnosis?", options: ["TRALI", "TACO", "TB", "CLL"], correct: 1},
    {q: "Which of the following may cause discrepancies in ABO and Rh system:", options: ["Cold auto agglutination", "Rouleaux formation", "Bacterial contamination", "All are correct"], correct: 3},
    {q: "What do you do if transfusion of blood was contaminated by bacteria?", options: ["Urine and blood culture for patient", "Blood culture for the blood bag which is used", "Treatment with an intravenous antibiotic", "All of the above are correct"], correct: 3},
    {q: "Prospective donors should not be accepted, if they appear in bad health:", options: ["True", "False"], correct: 0},
    {q: "Which one of the followings is more correct:", options: ["Partial D means that one or more epitopes of the (D) Ag are missed", "Partial D means all epitopes are present but weakly found on the surface", "Patient with partial D must receive Rh-D positive blood type", "Weak Rh-D means that one or more epitopes of the (D) Ag are missed"], correct: 0},
    {q: "The (BTS) should consider providing 500 ml drinking water to donors before donation:", options: ["True", "False"], correct: 0},
    {q: "TPHA is used for detection of:", options: ["Malaria", "Syphilis", "AIDS", "viral hepatitis"], correct: 1},
    {q: "A patient (unknown blood type) receives large volumes of group O RBCs, later plasma transfusion is required. Which plasma group should be used?", options: ["Group AB", "Group O", "Group A", "Group B"], correct: 0},
    {q: "(WB) means:", options: ["White blood cells", "Warmed blood", "Whole blood", "Waste blood"], correct: 2},
    {q: "The minimal accepted level of PCV of donated male is 42-50%:", options: ["True", "False"], correct: 0},
    {q: "Ulex europaeous is used as a source of:", options: ["Anti-A1", "Anti-A2", "Anti-H", "Anti-D"], correct: 2},
    {q: "Reagents used in reverse grouping test:", options: ["Anti-A", "Anti-B", "A-cells and B cells", "Anti-D"], correct: 2},
    {q: "Rh-blood group system was discovered by:", options: ["Levin Stetson(1939)", "Landestiener(1900)", "Stroly(1902)", "None"], correct: 3},
    {q: "AHG test also called coombs test:", options: ["True", "False"], correct: 0},
    {q: "RBCs units can also be frozen when buffered with:", options: ["Sodium citrate", "Heparine", "Glycerol", "Potassium fluoride"], correct: 2},
    {q: "Buffy coat is removed to make platelets for transfusion:", options: ["True", "False"], correct: 0},
    {q: "An individual has Rh Ag on the surface of RBCs and has anti-A, anti-B in the plasma. What is his blood type?", options: ["AB +ve", "A +ve", "AB -ve", "O +ve"], correct: 3},
    {q: "Which blood is most appropriate for a patient with severe anemia but normal blood volume?", options: ["Whole blood", "PRBCs", "FFP", "Platelets concentrate"], correct: 1},
    {q: "The best important step before blood transfusion is:", options: ["ABO grouping test", "C.M test", "Monitoring vital signs", "None"], correct: 1},
    {q: "In crossmatching test, take segment from the blood bag and wash it for 3 times with distilled water to make suspension of 5% RBCs:", options: ["True", "False"], correct: 1},
    {q: "Why do we use bovine albumin during crossmatching test?", options: ["To stop the reaction", "To increase the PH of the reaction", "To accelerate the reaction", "To make slow reaction"], correct: 2},
    {q: "We are studying blood banking for organ transplantation:", options: ["True", "False"], correct: 1},
    {q: "Dolichos biflorus is used as a source of:", options: ["Anti-A", "Anti-A1", "Anti-A2", "Anti-H"], correct: 1},
    {q: "ABO forward grouping test is used to determine the presence or absence of ABO antibodies in the serum:", options: ["True", "False"], correct: 1},
    {q: "When is Anti-D antibody titre recommended?", options: ["Rh-negative pregnant women", "after a history of miscarriage", "Rh-incompatible pregnancies", "All are correct"], correct: 3},
    {q: "What reagents are derived from plant extracts?", options: ["Panel cells", "commercial anti-B", "lectins", "AHG reagents"], correct: 2},
    {q: "A donor who is positive for HBsAg is:", options: ["Temporally deferred", "permanantly deferred", "Deferred if ALT is high", "deferred for 3 months"], correct: 1},
    {q: "Using known source of reagent antisera to detect ABO antigens on patients' red cells is known as:", options: ["Rh typing", "Reverse grouping", "DAT", "Forward grouping"], correct: 3},
    {q: "What immunodominant sugar confers B blood group specifity?", options: ["D-galactose", "L-fucose", "L-glucose", "D-fructose"], correct: 0},
    {q: "Platelets must be stored at 22c by agitation:", options: ["True", "False"], correct: 0},
    {q: "All donated blood must be screened for:", options: ["GUE", "viral infections", "s.TG", "TSP"], correct: 1},
    {q: "When the indirect coomb's test result is positive, one of the following should be done:", options: ["Crossmatching test", "Anti-D titre", "ABO and Rh", "WBCs count"], correct: 0},
    {q: "When performing the anti-D antibody titre test, the laboratory tubes must be placed in:", options: ["Room temperature for 30 minutes", "Refrigerator at 4-8 c for 1 hour", "Incubator at 37 c for 1 hour", "Dark place at 24 c"], correct: 2},
    {q: "The major principle antigens of Rh grouping system:", options: ["Rh-D", "Rh-C,c", "Rh-E,e", "All are correct"], correct: 3}
];

const questionsB = [...questionsA]; // يمكنك تغيير الأسئلة هنا إذا كانت تختلف فعلياً بين النموذجين

let activeQuestions = [];
let currentPosition = 0;
let scoreVal = 0;

function startQuiz(type) {
    activeQuestions = (type === 'A') ? questionsA : questionsB;
    currentPosition = 0;
    scoreVal = 0;
    document.getElementById('setup').style.display = 'none';
    document.getElementById('quiz-area').style.display = 'block';
    render();
}

function render() {
    const q = activeQuestions[currentPosition];
    const len = activeQuestions.length;
    document.getElementById('q-counter').innerText = `Question ${currentPosition + 1}/${len}`;
    document.getElementById('p-bar').style.width = `${((currentPosition + 1) / len) * 100}%`;
    document.getElementById('q-text').innerText = q.q;
    
    const container = document.getElementById('options');
    container.innerHTML = '';
    
    q.options.forEach((txt, i) => {
        const d = document.createElement('div');
        d.className = 'option';
        d.innerText = txt;
        d.onclick = () => validate(i, d);
        container.appendChild(d);
    });
    document.getElementById('next-btn').style.display = 'none';
}

function validate(idx, el) {
    const q = activeQuestions[currentPosition];
    const opts = document.querySelectorAll('.option');
    opts.forEach(o => o.style.pointerEvents = 'none');

    if(idx === q.correct) {
        el.classList.add('correct');
        scoreVal++;
    } else {
        el.classList.add('wrong');
        opts[q.correct].classList.add('correct');
    }
    document.getElementById('next-btn').style.display = 'block';
}

function nextQuestion() {
    currentPosition++;
    if(currentPosition < activeQuestions.length) {
        render();
    } else {
        finish();
    }
}

function finish() {
    document.getElementById('quiz-area').style.display = 'none';
    document.getElementById('result').style.display = 'block';
    document.getElementById('final-score').innerText = `${scoreVal}/${activeQuestions.length}`;
}
</script>

</body>
</html>
