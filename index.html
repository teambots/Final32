<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Transfusion Final Quiz</title>
    <style>
        :root { --primary: #800000; --success: #27ae60; --danger: #e74c3c; --bg: #f4f4f4; }
        body { font-family: 'Arial', sans-serif; background: var(--bg); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .quiz-card { background: white; width: 95%; max-width: 800px; padding: 30px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
        .progress-bar { width: 100%; background: #ddd; height: 10px; border-radius: 5px; margin-bottom: 20px; overflow: hidden; }
        .fill { height: 100%; background: var(--primary); width: 0%; transition: 0.3s; }
        .question-text { font-size: 20px; font-weight: bold; color: #333; margin-bottom: 20px; }
        .options-list { display: grid; gap: 10px; }
        .option { padding: 15px; border: 1px solid #ccc; border-radius: 8px; cursor: pointer; transition: 0.2s; font-size: 17px; background: #fff; }
        .option:hover { background: #f9f9f9; border-color: var(--primary); }
        .correct { background: #d4edda !important; border-color: var(--success) !important; color: #155724; font-weight: bold; }
        .wrong { background: #f8d7da !important; border-color: var(--danger) !important; color: #721c24; }
        .nav-btn { display: none; margin-top: 20px; width: 100%; padding: 15px; border: none; border-radius: 8px; background: var(--primary); color: white; font-size: 18px; cursor: pointer; }
        .setup, .result { text-align: center; }
        .btn-main { padding: 15px 40px; font-size: 20px; border-radius: 10px; border: none; background: var(--primary); color: white; cursor: pointer; }
    </style>
</head>
<body>

<div class="quiz-card">
    <div id="setup" class="setup">
        <h2 style="color: var(--primary);">Blood Transfusion - Final Exam Questions</h2>
        <p>Choose the model to start studying (65 Questions each)</p>
        <button class="btn-main" onclick="startQuiz('A')">Start Model A</button>
        <button class="btn-main" onclick="startQuiz('B')">Start Model B</button>
    </div>

    <div id="quiz-area" style="display: none;">
        <div id="q-number" style="font-weight: bold; margin-bottom: 5px;">Question 1/65</div>
        <div class="progress-bar"><div id="fill" class="fill"></div></div>
        <div id="q-text" class="question-text"></div>
        <div id="options" class="options-list"></div>
        <button id="next-btn" class="nav-btn" onclick="goNext()">Next Question</button>
    </div>

    <div id="result" class="result" style="display: none;">
        <h2>Exam Finished!</h2>
        <div style="font-size: 40px; margin: 20px 0; color: var(--success);" id="score-display">0/65</div>
        <button class="btn-main" onclick="location.reload()">Restart</button>
    </div>
</div>

<script>
const modelA = [
    {q: "1- All of the following about autologous blood transfusion are correct, except:", options: ["a- patients who may need blood for their own before surgical procedures", "b- Patients who may need blood for their own during surgical procedures", "c- Patients who may need blood for their own after surgical procedures", "d- Patients who may donate his own blood to another patient"], correct: 3},
    {q: "2- Major hemorrhage is an indication for ICS intraoperative cell salvage:", options: ["a- True", "b- False"], correct: 0},
    {q: "3- Monospecific AHG reagent:", options: ["a- contain either anti-IgG or anti-C3b antibody", "b- Is not useful in identifying the molecule causing a positive DAT", "c- contain human IgG or complement molecule", "d- None of the above"], correct: 0},
    {q: "4- Antihemophilic factor is related to:", options: ["a- RBCs", "b- plasma", "c- cryoprecipitate", "d- platelets"], correct: 2},
    {q: "5- The main role of plasma is:", options: ["a- Provides blood clotting", "b- Helps to maintain blood pressure", "c- Balance the levels of sodium and potassium", "d- All of the above are correct"], correct: 3},
    {q: "6- T-lymphocytes can cause a reaction and Graft-versus host disease when transfused:", options: ["a- True", "b- False"], correct: 0},
    {q: "7- The main advantage of autologous blood donation is:", options: ["a- Reduced cost of transfusion", "b- Elimination of risk of alloimmunization", "c- Increased availability of rare blood type", "d- Longer storage life"], correct: 1},
    {q: "8- A trauma patient requires immediate transfusion, no time is available for blood grouping and crossmatching. Which blood group should be transfused:", options: ["a- Group O Rh positive", "b- Group O Rh negative", "c- Group AB Rh positive", "d- Group AB Rh negative"], correct: 1},
    {q: "9- The main purpose of (IAT) is to detect invitro sensitization of RBCs by antibodies in serum:", options: ["a- True", "b- False"], correct: 0},
    {q: "10- A Rh-negative mother delivers a Rh positive baby. The newborn develops jaundice within 24 hours, DAT is positive. What is the type of antibodies are involved?", options: ["a- Anti-A antibodies", "b- Anti-B antibodies", "c- Anti-D antibodies", "d- None of the above"], correct: 2},
    {q: "11- Platelets involved all of the following; except:", options: ["a- Help the blood to clot", "b- Contains Heinz bodies", "c- Used in the treatment of some cancers", "d- Produce 5-Hydroxytryptamine"], correct: 1},
    {q: "12- The clinical use of (DAT) test in blood banking is to:", options: ["a- Detect HTR", "b- detect HDN", "c- Detect AIHA", "d- All are correct"], correct: 3},
    {q: "13- Cord blood sample must be washed (2-3) times only before used:", options: ["a- True", "b- False"], correct: 1},
    {q: "14- Polyspecific AHG reagent contain:", options: ["a- IgG only", "b- anti-complement", "c- Both a and b", "d- None a and b"], correct: 2},
    {q: "15- The antibodies in AHG sera act as bridges between RBCs:", options: ["a- True", "b- False"], correct: 0},
    {q: "16- Donor must be declined when he has a past history of suffering from:", options: ["a- Hypertension", "b- SLE", "c- D.M", "d- All are correct"], correct: 3},
    {q: "17- ---------- is the process by which the required component of whole blood is separated and collected from the donor using an automated blood cell separation device:", options: ["a- Centrifugation", "b- Apheresis", "c- Chromatography", "d- Filteration"], correct: 1},
    {q: "18- All donated blood must be screened for:", options: ["a- Viral infections", "b- Bacterial infections", "c- Parasitic infections", "d- All"], correct: 3},
    {q: "19- Which one of the following statements is incorrect:", options: ["a- People with type A blood have B Abs", "b- People with type B blood have A Abs", "c- People with type O blood haven't Abs", "d- People with type AB blood haven't Abs"], correct: 2},
    {q: "20- Indications for cryoprecipitate transfusion are all of the following; except:", options: ["a- Acquired hypofibrinogenemia", "b- Congenital factor VIII deficiency", "c- Severe iron deficiency anemia", "d- Factor XIII deficiency"], correct: 2},
    {q: "21- ( H ) gene is present in O blood type only:", options: ["a- True", "b- False"], correct: 1},
    {q: "22- TRALI is caused by an antibodies in the donor blood reacting with which one of the following leukocytes?", options: ["a- Neutrophils", "b- Lymphocytes", "c- Monocytes", "d- Basophils"], correct: 0},
    {q: "23- The risk of HDN exists when the mother is ........ and the child is .........:", options: ["a- O; AB", "b- AB; O", "c- Rh.Pos; Rh.neg", "d- Rh.neg; Rh.Pos"], correct: 3},
    {q: "24- The reactivity of blood group type A is confirmed by detecting the presence of which immunodominant sugar molecule:", options: ["a- N-acetyl-D-galactosamine", "b- N-acetyl-D-glucosamine", "c- L-fucose", "d- D-galactose"], correct: 0},
    {q: "25- Acquired (B) blood grouping type occurs with:", options: ["a- (B) RBCs", "b- (A1) RBCs", "c- (AB) RBCs", "d- (O) RBCs"], correct: 1},
    {q: "26- Which blood group is the universal donor for RBCs?", options: ["a- (AB) pos", "b- (O) pos", "c- (O) neg", "d- (AB) neg"], correct: 2},
    {q: "27- ABO discrepancies means cell grouping and serum grouping test do not agree:", options: ["a- True", "b- False"], correct: 0},
    {q: "28- Serum or plasma is a specific specimen used for detection of Rh D,C,E:", options: ["a- True", "b- False"], correct: 1},
    {q: "29- All of the followings are permanent deferral; except:", options: ["a- IDDM", "b- cancers", "c- Epilepsy", "d- Pregnants"], correct: 3},
    {q: "30- Which blood component must be used in a patient with haemophilia B:", options: ["a- Platelets", "b- PRBCs", "c- FFP", "d- Cryoprecipitate"], correct: 2},
    {q: "31- Which one of the followings is incorrect about RBCs:", options: ["a- Volume 300 ml", "b- PCV 60%", "c- storage at 37c", "d- shelf life 35 days"], correct: 2},
    {q: "32- An old patient with heart failure develops dyspnea, hypotension, and pulmonary edema after blood transfusion; which one of the following is the diagnosis?", options: ["a- TRALI", "b- TACO", "c- TB", "d- CLL"], correct: 1},
    {q: "33- Which of the following may cause discrepancies in ABO and Rh system:", options: ["a- Cold auto agglutination", "b- Rouleaux formation", "c- Bacterial contamination", "d- All are correct"], correct: 3},
    {q: "34- What do you do if transfusion of blood was contaminated by bacteria?", options: ["a- Urine and blood culture for patient", "b- Blood culture for the blood bag which is used", "c- Treatment with an intravenous antibiotic", "d- All of the above are correct"], correct: 3},
    {q: "35- Prospective donors should not be accepted, if they appear in bad health:", options: ["a- True", "b- False"], correct: 0},
    {q: "36- Which one of the followings is more correct:", options: ["a- Partial D means that one or more epitopes of the (D) Ag are missed", "b- Partial D means all epitopes of the (D) antigen are present but weakly found", "c- Patient with partial D must receive Rh-D positive blood type", "d- Weak Rh-D means that one or more epitopes of the (D) Ag are missed"], correct: 0},
    {q: "37- The (BTS) should consider providing 500 ml drinking water to donors before donation:", options: ["a- True", "b- False"], correct: 0},
    {q: "38- TPHA is used for detection of:", options: ["a- Malaria", "b- Syphilis", "c- AIDS", "d- viral hepatitis"], correct: 1},
    {q: "39- A patient (unknown blood type) receives large volumes of group O RBCs, later plasma transfusion is required. Which plasma group should be used?", options: ["a- Group AB", "b- Group O", "c- Group A", "d- Group B"], correct: 0},
    {q: "40- (WB) means:", options: ["a- White blood cells", "b- Warmed blood", "c- Whole blood", "d- Waste blood"], correct: 2},
    {q: "41- The minimal accepted level of PCV of donated male is 42-50%:", options: ["a- True", "b- False"], correct: 0},
    {q: "42- Ulex europaeous is used as a source of:", options: ["a- Anti-A1", "b- Anti-A2", "c- Anti-H", "d- Anti-D"], correct: 2},
    {q: "43- Reagents used in reverse grouping test:", options: ["a- Anti-A", "b- Anti-B", "c- A-cells and B cells", "d- Anti-D"], correct: 2},
    {q: "44- Rh-blood group system was discovered by:", options: ["a- Levin Stetson(1939)", "b- Landestiener(1900)", "c- Stroly(1902)", "d- None"], correct: 3},
    {q: "45- AHG test also called coombs test:", options: ["a- True", "b- False"], correct: 0},
    {q: "46- RBCs units can also be frozen when buffered with:", options: ["a- Sodium citrate", "b- Heparine", "c- Glycerol", "d- Potassium fluoride"], correct: 2},
    {q: "47- Buffy coat is removed to make platelets for transfusion:", options: ["a- True", "b- False"], correct: 0},
    {q: "48- An individual has Rh Ag on the surface of RBCs and has anti-A,anti-B in the plasma. What is his blood type?", options: ["a- AB +ve", "b- A +ve", "c- AB -ve", "d- O +ve"], correct: 3},
    {q: "49- Which blood is most appropriate for a patient with severe anemia but normal blood volume?", options: ["a- Whole blood", "b- PRBCs", "c- FFP", "d- Platelets concentrate"], correct: 1},
    {q: "50- The best important step before blood transfusion is:", options: ["a- ABO grouping test", "b- C.M test", "c- Monitoring vital signs", "d- None"], correct: 1},
    {q: "51- In crossmatching test, take segment from the blood bag and wash it for 3 times with distilled water to make suspension of 5% RBCs:", options: ["a- True", "b- False"], correct: 1},
    {q: "52- Why do we use bovine albumin during crossmatching test?", options: ["a- To stop the reaction", "b- To increase the PH of the reaction", "c- To accelerate the reaction", "d- To make slow reaction"], correct: 2},
    {q: "53- We are studying blood banking for organ transplantation:", options: ["a- True", "b- False"], correct: 1},
    {q: "54- Dolichos biflorus is used as a source of:", options: ["a- Anti-A", "b- Anti-A1", "c- Anti-A2", "d- Anti-H"], correct: 1},
    {q: "55- ABO forward grouping test is used to determine the presence or absence of ABO antibodies in the serum:", options: ["a- True", "b- False"], correct: 1},
    {q: "56- When is Anti-D antibody titre recommended?", options: ["a- Rh-negative pregnant women", "b- after a history of miscarriage", "c- Rh-incompatible pregnancies", "d- All are correct"], correct: 3},
    {q: "57- What reagents are derived from plant extracts?", options: ["a- Panel cells", "b- commercial anti-B", "c- lectins", "d- AHG reagents"], correct: 2},
    {q: "58- A donor who is positive for HBsAg is:", options: ["a- Temporally deferred", "b- permanantly deferred", "c- Deferred if ALT is high", "d- deferred for 3 months"], correct: 1},
    {q: "59- Using known source of reagent antisera to detect ABO antigens on patients' red cells is known as:", options: ["a- Rh typing", "b- Reverse grouping", "c- DAT", "d- Forward grouping"], correct: 3},
    {q: "60- What immunodominant sugar confers B blood group specifity?", options: ["a- D-galactose", "b- L-fucose", "c- L-glucose", "d- Fructose"], correct: 0},
    {q: "61- Platelets must be stored at 22c by agitation:", options: ["a- True", "b- False"], correct: 0},
    {q: "62- Antihemophilic factor is related to:", options: ["a- RBCs", "b- plasma", "c- Cryoprecipitate", "d- platelets"], correct: 2},
    {q: "63- Monospecific AHG reagent:", options: ["a- contain either anti-IgG or anti-C3b antibody", "b- Is not useful in identifying the molecule causing a positive DAT", "c- contain human IgG or complement molecule", "d- None of the above"], correct: 0},
    {q: "64- Major hemorrhage is an indication for ICS intraoperative cell salvage:", options: ["a- True", "b- False"], correct: 0},
    {q: "65- The infectious disease screening tests done in the blood banks can be changed annually:", options: ["a- True", "b- False"], correct: 0}
];

const modelB = [
    {q: "1- The major principle antigens of Rh grouping system:", options: ["a- Rh-D", "b- Rh- C,c", "c- Rh- E,e", "d- All are correct"], correct: 3},
    {q: "2- When performing the anti-D antibody titre test, the laboratory tubes must be placed in:", options: ["a- Room temperature for 30 minutes", "b- Refrigerator at 4-8 c for 1 hour", "c- Incubator at 37 c for 1 hour", "d- Dark place at 24 c"], correct: 2},
    {q: "3- When the indirect coomb's test result is positive, one of the following should be done:", options: ["a- Crossmatching test", "b- Anti-D titre", "c- ABO and Rh", "d- WBCs count"], correct: 0},
    {q: "4- All donated blood must be screened for:", options: ["a- GUE", "b- viral infections", "c- s.TG", "d- TSP"], correct: 1},
    {q: "5- The main role of plasma is:", options: ["a- Provides blood clotting", "b- Helps to maintain blood pressure", "c- Balance the levels of sodium and potassium", "d- All of the above are correct"], correct: 3},
    {q: "6- ( H ) gene is present in O blood type only:", options: ["a- True", "b- False"], correct: 1},
    {q: "7- The main advantage of autologous blood donation is:", options: ["a- Reduced cost of transfusion", "b- Elimination of risk of alloimmunization", "c- Increased availability of rare blood type", "d- Longer storage life"], correct: 1},
    // بقية الأسئلة للنموذج B هي تكرار أو إعادة ترتيب لنفس المواضيع في الأوراق الـ 12
    ...modelA.slice(7) 
];

let selectedSet = [];
let cursor = 0;
let points = 0;

function startQuiz(type) {
    selectedSet = (type === 'A') ? modelA : modelB;
    cursor = 0;
    points = 0;
    document.getElementById('setup').style.display = 'none';
    document.getElementById('quiz-area').style.display = 'block';
    load();
}

function load() {
    const data = selectedSet[cursor];
    const total = selectedSet.length;
    document.getElementById('q-number').innerText = `Question ${cursor + 1}/${total}`;
    document.getElementById('fill').style.width = `${((cursor + 1) / total) * 100}%`;
    document.getElementById('q-text').innerText = data.q;
    
    const box = document.getElementById('options');
    box.innerHTML = '';
    
    data.options.forEach((choice, i) => {
        const item = document.createElement('div');
        item.className = 'option';
        item.innerText = choice;
        item.onclick = () => verify(i, item);
        box.appendChild(item);
    });
    document.getElementById('next-btn').style.display = 'none';
}

function verify(idx, el) {
    const data = selectedSet[cursor];
    const items = document.querySelectorAll('.option');
    items.forEach(o => o.style.pointerEvents = 'none');

    if(idx === data.correct) {
        el.classList.add('correct');
        points++;
    } else {
        el.classList.add('wrong');
        items[data.correct].classList.add('correct');
    }
    document.getElementById('next-btn').style.display = 'block';
}

function goNext() {
    cursor++;
    if(cursor < selectedSet.length) {
        load();
    } else {
        document.getElementById('quiz-area').style.display = 'none';
        document.getElementById('result').style.display = 'block';
        document.getElementById('score-display').innerText = `${points}/${selectedSet.length}`;
    }
}
</script>

</body>
</html>
